@tailwind base;
@tailwind components;
@tailwind utilities;

/* ==================== BASE (dark industrial) ==================== */
@layer base {
  :root {
    --bg: 15 15 15;        /* #0f0f0f */
    --fg: 230 230 230;     /* text */
    --muted: 160 160 160;  /* secondary text */
    --line: 40 40 40;      /* hairline borders */
    --brand: 39 199 217;   /* cyan accent */
  }

  html, body { height: 100%; }
  :root { color-scheme: dark; }

  body {
    @apply antialiased;
    background: rgb(var(--bg));
    color: rgb(var(--fg));
  }

  a {
    color: rgb(var(--fg));
    text-decoration: underline;
    text-underline-offset: 4px;
    text-decoration-color: transparent;
    transition: color .2s ease, text-decoration-color .2s ease;
  }
  a:hover { text-decoration-color: rgb(var(--brand)); }

  hr { border-top: 1px solid rgb(var(--line)); }

  /* Keyboard focus */
  :focus-visible {
    outline: 2px solid rgb(var(--brand));
    outline-offset: 3px;
  }

  svg { display: block; }
}

/* ==================== UTILITIES / COMPONENTS ==================== */
@layer utilities {
  /* ---------- Layout (jednotná šířka obsahu) ---------- */
  .container-app {
    width: 100%;
    max-width: 1160px;
    margin-inline: auto;
    padding-inline: 1rem;            /* 16px */
  }
  @media (min-width: 640px){ .container-app{ padding-inline: 1.25rem; } } /* 20px */
  @media (min-width: 1024px){ .container-app{ padding-inline: 2rem; } }   /* 32px */

  /* ---------- Cards / Panel ---------- */
  .card {
    border-radius: 1rem;
    border: 1px solid rgb(var(--line));
    background: rgba(0,0,0,0.2);
    backdrop-filter: blur(6px);
  }
  .card-pro { @apply card p-5 transition; box-shadow: 0 0 0 1px rgba(255,255,255,.06) inset; }
  .card-pro:hover { border-color: rgb(var(--brand)); box-shadow: none; transform: translateY(1px); }

  /* „Skleněný“ panel – používáme pro hero/sekce i karty */
  .panel{
    position: relative;
    overflow: hidden;
    border-radius: 1.5rem;
    border: 1px solid rgb(var(--line));
    background: rgba(255,255,255,.03);
    backdrop-filter: blur(8px);
  }
  /* Fallback bez blur pro starší prohlížeče */
  @supports not (backdrop-filter: blur(2px)){
    .panel { background: rgba(255,255,255,.02); }
  }

  /* Jemný hover pro „kartový“ panel */
  .panel.pattern-card{
    transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
  }
  .panel.pattern-card:hover,
  .panel.pattern-card:focus-within{
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(39,199,217,.10);
    border-color: rgba(var(--brand), .55);
  }

  /* ---------- Mřížkový pattern (obecný) ---------- */
  .pattern{
    position: relative;
    isolation: isolate;     /* aby ::before bylo pod obsahem */
  }
  .pattern::before{
    content:"";
    position:absolute; inset:0;
    pointer-events:none; z-index:-1;
    background-image:
      linear-gradient(to right, rgba(var(--line), .35) 1px, transparent 1px),
      linear-gradient(to bottom, rgba(var(--line), .35) 1px, transparent 1px);
    background-size: var(--pattern-size, 56px) var(--pattern-size, 56px);
    opacity: var(--pattern-opacity, .12);
    mix-blend-mode: soft-light;
    border-radius: inherit;
  }

  /* ---------- Mřížka pro karty (jemnější) ---------- */
  /* Používej: class="panel pattern-card" */
  .pattern-card{
    --pattern-size: 24px;                  /* hustší než hero */
    --pattern-line: rgba(255,255,255,.06); /* jemná čára */
    position: relative;
    isolation: isolate;
  }
  .pattern-card::before{
    content:"";
    position:absolute; inset:0; z-index:-1; pointer-events:none;
    background:
      linear-gradient(to right, var(--pattern-line) 1px, transparent 1px),
      linear-gradient(to bottom, var(--pattern-line) 1px, transparent 1px);
    background-size: var(--pattern-size) var(--pattern-size);
    /* lehký fade shora, ať mřížka nebijí do očí */
    mask-image: radial-gradient(160% 90% at 50% 0%, #000 45%, transparent 65%);
    opacity:.85;
    border-radius: inherit;
  }
  /* jemný brand „glow“ při interakci */
  .pattern-card:hover::after,
  .pattern-card:focus-within::after{
    content:"";
    position:absolute; inset:-10% -6%; z-index:-2; pointer-events:none;
    background:
      radial-gradient(600px 300px at 15% -10%, rgba(var(--brand), .10), transparent 60%),
      radial-gradient(700px 360px at 120% 0%, rgba(var(--brand), .06), transparent 60%);
    filter: blur(6px);
  }
  @media (max-width: 640px){
    .pattern-card { --pattern-size: 28px; } /* na mobilu o fous řidší mřížka */
  }

  /* ---------- Buttons ---------- */
  .btn{
    @apply inline-flex items-center gap-2 text-sm transition;
    border-radius: .75rem;
    border: 1px solid rgb(var(--line));
    padding: .5rem .75rem;
  }
  .btn:hover { background: rgba(255,255,255,.05); }

  .btn-primary{
    color: #000;
    background: rgb(var(--brand));
    border-color: rgb(var(--brand));
    box-shadow: 0 1px 0 rgba(0,0,0,.08), 0 12px 24px -12px rgba(39,199,217,.55);
  }
  .btn-primary:hover { filter: brightness(1.06); transform: translateY(-1px); }
  .btn-primary:active { transform: translateY(0); }

  .btn-secondary{ background: transparent; }
  .btn-secondary:hover { background: rgba(255,255,255,.05); }

  .btn-lg { padding: .7rem 1rem; font-size: .95rem; }
  .btn[data-active="true"] { background: rgba(255,255,255,.08); }

  /* ---------- Segmented control ---------- */
  .segmented { @apply inline-flex overflow-hidden; border: 1px solid rgb(var(--line)); border-radius: .75rem; }
  .segmented > button { @apply px-2.5 py-1.5 text-xs uppercase tracking-wide; }
  .segmented > button[data-active="true"] { background: rgba(255,255,255,.08); }

  /* ---------- Forms ---------- */
  .input {
    @apply w-full text-sm;
    border-radius: .75rem;
    border: 1px solid rgb(var(--line));
    background: rgba(0,0,0,.2);
    padding: .625rem .875rem;
    outline: none;
    transition: border-color .2s, box-shadow .2s;
  }
  .input:focus {
    border-color: rgb(var(--brand));
    box-shadow: 0 0 0 2px rgb(var(--brand) / .25);
  }
  .textarea { @apply input min-h-[220px]; }
  .help { @apply text-xs; color: rgb(var(--muted)); }

  /* ---------- File dropzone ---------- */
  .dropzone {
    @apply text-sm;
    color: rgb(var(--muted));
    border: 1px dashed rgb(var(--line));
    border-radius: .75rem;
    padding: 1.25rem;
    transition: background .2s, border-color .2s, color .2s;
  }
  .dropzone:hover,
  .dropzone[data-active="true"] {
    border-color: rgb(var(--brand));
    background: rgba(39,199,217,.06);
    color: rgb(var(--fg));
  }

  /* ---------- Hero effects ---------- */
  .beam { position: relative; isolation: isolate; }
  .beam::before{
    content:""; position:absolute; inset:-20% -10%;
    background:
      radial-gradient(600px 320px at var(--mx,50%) var(--my,30%), rgba(var(--brand), .18), transparent 60%),
      radial-gradient(900px 480px at 120% -10%, rgba(var(--brand), .08), transparent 60%);
    pointer-events:none; z-index:-1; filter: blur(6px);
    transition: background-position .15s ease-out;
  }

  .shimmer{
    background: linear-gradient(90deg, transparent, rgba(var(--brand),.5), transparent);
    background-size: 200% 2px;
    background-repeat: no-repeat;
    background-position: -100% 100%;
    padding-bottom: 6px;
  }
  .shimmer:hover{ animation: shimmer-move 1200ms ease; }
  @keyframes shimmer-move { to { background-position: 120% 100%; } }

  /* ---------- Dekor „toolpath“ ---------- */
  .toolpath-bg { position: relative; isolation: isolate; }
  .toolpath-bg::before{
    content:""; position:absolute; inset:-10% -5% 0;
    background:
      radial-gradient(1200px 600px at 20% -10%, rgba(39,199,217,.18), transparent 55%),
      radial-gradient(1000px 500px at 110% 10%, rgba(39,199,217,.10), transparent 50%);
    z-index:-2; pointer-events:none;
  }
  .toolpath-bg::after{
    content:""; position:absolute; inset:0;
    mask: radial-gradient(60% 35% at 40% 35%, #000 50%, transparent);
    opacity:.35;
    background:
      repeating-linear-gradient(90deg, rgba(255,255,255,.06) 0 1px, transparent 1px 10px),
      repeating-linear-gradient( 0deg, rgba(255,255,255,.03) 0 1px, transparent 1px 12px);
    z-index:-1; pointer-events:none;
  }

  /* ---------- Nav wrapper (sticky + blur) ---------- */
  .navwrap{
    @apply sticky top-0 z-40;
    border-bottom: 1px solid rgb(var(--line));
    background: rgba(0,0,0,.30);
    backdrop-filter: blur(8px);
    transition: box-shadow .2s ease;
  }
  .navwrap.scrolled { box-shadow: 0 10px 30px rgba(0,0,0,.35); }

  /* ---------- Screen reader helpers ---------- */
  .sr-only {
    position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px;
    overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border-width: 0;
  }
  .focus\:not-sr-only:focus {
    position: static; width: auto; height: auto; margin: 0; overflow: visible;
    clip: auto; white-space: normal;
  }
}
